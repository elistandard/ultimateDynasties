// Base URL for team logos
const baseUrl = "https://github.com/elistandard/ultimateDynasties/blob/main/college-mens/college-mens-logos/";

// Logo mapping for teams
export const logoMapping = [
    {team: 'Alabama-Huntsville', url: baseUrl + 'Alabama-Huntsville.jpeg?raw=true'},
    {team: 'Arizona', url: baseUrl + 'Arizona.png?raw=true'},
    {team: 'Auburn', url: baseUrl + 'Auburn.jpg?raw=true'},
    {team: 'BYU', url: baseUrl + 'BYU.png?raw=true'},
    {team: 'Boston College', url: baseUrl + 'Boston College.gif?raw=true'},
    {team: 'British Columbia', url: baseUrl + 'British Columbia.jpg?raw=true'},
    {team: 'Brown', url: baseUrl + 'Brown.jpeg?raw=true'},
    {team: 'Cal Poly SLO', url: baseUrl + 'Cal Poly SLO.jpg?raw=true'},
    {team: 'UC San Diego', url: baseUrl + 'UC San Diego.jpg?raw=true'},
    {team: 'UC Santa Barbara', url: baseUrl + 'UC Santa Barbara.jpg?raw=true'},
    {team: 'UC Santa Cruz', url: baseUrl + 'UC Santa Cruz.jpg?raw=true'},
    {team: 'California', url: baseUrl + 'California.jpg?raw=true'},
    {team: 'Carleton', url: baseUrl + 'Carleton.png?raw=true'},
    {team: 'Carnegie Mellon', url: baseUrl + 'Carnegie Mellon.png?raw=true'},
    {team: 'Case Western Reserve', url: baseUrl + 'Case Western Reserve.png?raw=true'},
    {team: 'Central Florida', url: baseUrl + 'Central Florida.png?raw=true'},
    {team: 'Chabot Community College', url: baseUrl + 'Chabot Community College.jpeg?raw=true'},
    {team: 'Cincinnati', url: baseUrl + 'Cincinnati.png?raw=true'},
    {team: 'Colorado College', url: baseUrl + 'Colorado College.jpg?raw=true'},
    {team: 'Colorado State', url: baseUrl + 'Colorado State.png?raw=true'},
    {team: 'Colorado', url: baseUrl + 'Colorado.png?raw=true'},
    {team: 'Connecticut', url: baseUrl + 'Connecticut.jpg?raw=true'},
    {team: 'Cornell', url: baseUrl + 'Cornell.jpg?raw=true'},
    {team: 'Columbia', url: baseUrl + 'Columbia.png?raw=true'},
    {team: 'Dartmouth', url: baseUrl + 'Dartmouth.png?raw=true'},
    {team: 'Delaware', url: baseUrl + 'Delaware.jpeg?raw=true'},
    {team: 'Duke', url: baseUrl + 'Duke.jpg?raw=true'},
    {team: 'East Carolina', url: baseUrl + 'East Carolina.jpeg?raw=true'},
    {team: 'Eastern Michigan', url: baseUrl + 'Eastern Michigan.jpg?raw=true'},
    {team: 'Florida State', url: baseUrl + 'Florida State.gif?raw=true'},
    {team: 'Florida', url: baseUrl + 'Florida.png?raw=true'},
    {team: 'George Washington', url: baseUrl + 'George Washington.jpeg?raw=true'},
    {team: 'Georgetown', url: baseUrl + 'Georgetown.png?raw=true'},
    {team: 'Georgia Tech', url: baseUrl + 'Georgia Tech.jpeg?raw=true'},
    {team: 'Georgia', url: baseUrl + 'Georgia.jpeg?raw=true'},
    {team: 'Glassboro', url: baseUrl + 'Glassboro State.jpg?raw=true'},
    {team: 'Harvard', url: baseUrl + 'Harvard.jpg?raw=true'},
    {team: 'Illinois', url: baseUrl + 'Illinois.jpg?raw=true'},
    {team: 'Indiana', url: baseUrl + 'Indiana.png?raw=true'},
    {team: 'Iowa State', url: baseUrl + 'Iowa State.png?raw=true'},
    {team: 'Iowa', url: baseUrl + 'Iowa.jpeg?raw=true'},
    {team: 'James Madison', url: baseUrl + 'James Madison.jpeg?raw=true'},
    {team: 'Kansas', url: baseUrl + 'Kansas.jpeg?raw=true'},
    {team: 'LSU', url: baseUrl + 'LSU.jpg?raw=true'},
    {team: 'Las Positas College', url: baseUrl + 'Las Positas.png?raw=true'},
    {team: 'Luther', url: baseUrl + 'Luther.png?raw=true'},
    {team: 'Maryland', url: baseUrl + 'Maryland.png?raw=true'},
    {team: 'Massachusetts', url: baseUrl + 'Massachusetts.jpeg?raw=true'},
    {team: 'McGill', url: baseUrl + 'McGill.jpg?raw=true'},
    {team: 'Michigan State', url: baseUrl + 'Michigan State.jpg?raw=true'},
    {team: 'Michigan', url: baseUrl + 'Michigan.png?raw=true'},
    {team: 'Middlebury', url: baseUrl + 'Middlebury.webp?raw=true'},
    {team: 'Minnesota-Duluth', url: baseUrl + 'Minnesota-Duluth.jpeg?raw=true'},
    {team: 'Minnesota', url: baseUrl + 'Minnesota.png?raw=true'},
    {team: 'Missouri', url: baseUrl + 'Missouri.png?raw=true'},
    {team: 'MIT', url: baseUrl + 'MIT.jpg?raw=true'},
    {team: 'NC State', url: baseUrl + 'NC State.jpg?raw=true'},
    {team: 'UNC Wilmington', url: baseUrl + 'UNC Wilmington.jpg?raw=true'},
    {team: 'North Carolina', url: baseUrl + 'North Carolina.png?raw=true'},
    {team: 'North Texas', url: baseUrl + 'North Texas.jpg?raw=true'},
    {team: 'Northeastern', url: baseUrl + 'Northeastern.jpg?raw=true'},
    {team: 'Northwestern', url: baseUrl + 'Northwestern.png?raw=true'},
    {team: 'Notre Dame', url: baseUrl + 'Notre Dame.jpg?raw=true'},
    {team: 'Oberlin', url: baseUrl + 'Oberlin.png?raw=true'},
    {team: 'Ohio State', url: baseUrl + 'Ohio State.jpg?raw=true'},
    {team: 'Ohio', url: baseUrl + 'Ohio.jpeg?raw=true'},
    {team: 'Oregon State', url: baseUrl + 'Oregon State.png?raw=true'},
    {team: 'Oregon', url: baseUrl + 'Oregon.png?raw=true'},
    {team: 'Ottawa', url: baseUrl + 'Ottawa.png?raw=true'},
    {team: 'Penn State', url: baseUrl + 'Penn State.jpg?raw=true'},
    {team: 'Penn', url: baseUrl + 'Penn.png?raw=true'},
    {team: 'Pittsburgh', url: baseUrl + 'Pittsburgh.png?raw=true'},
    {team: 'Princeton', url: baseUrl + 'Princeton.jpeg?raw=true'},
    {team: 'Purdue', url: baseUrl + 'Purdue.jpeg?raw=true'},
    {team: 'Queen\'s', url: baseUrl + 'Queen\'s.png?raw=true'},
    {team: 'Rice', url: baseUrl + 'Rice.webp?raw=true'},
    {team: 'Rutgers', url: baseUrl + 'Rutgers.jpeg?raw=true'},
    {team: 'SUNY Albany', url: baseUrl + 'SUNY Albany.jpeg?raw=true'},
    {team: 'SUNY Binghamton', url: baseUrl + 'SUNY Binghamton.jpeg?raw=true'},
    {team: 'SUNY Purchase', url: baseUrl + 'SUNY Purchase.png?raw=true'},
    {team: 'SW Missouri State', url: baseUrl + 'SW Missouri State.png?raw=true'},
    {team: 'Saint Louis', url: baseUrl + 'Saint Louis.jpeg?raw=true'},
    {team: 'Salisbury', url: baseUrl + 'Salisbury.jpeg?raw=true'},
    {team: 'Southern California', url: baseUrl + 'Southern California.jpg?raw=true'},
    {team: 'Stanford', url: baseUrl + 'Stanford.png?raw=true'},
    {team: 'Swarthmore', url: baseUrl + 'Swarthmore.png?raw=true'},
    {team: 'Syracuse', url: baseUrl + 'Syracuse.png?raw=true'},
    {team: 'Texas A&M', url: baseUrl + 'Texas A&M.jpg?raw=true'},
    {team: 'Texas State', url: baseUrl + 'Texas State.jpg?raw=true'},
    {team: 'Texas', url: baseUrl + 'Texas.jpg?raw=true'},
    {team: 'Tufts', url: baseUrl + 'Tufts.png?raw=true'},
    {team: 'Tulane', url: baseUrl + 'Tulane.jpeg?raw=true'},
    {team: 'UC Davis', url: baseUrl + 'UC Davis.jpeg?raw=true'},
    {team: 'UCLA', url: baseUrl + 'UCLA.jpg?raw=true'},
    {team: 'UT Dallas', url: baseUrl + 'UT Dallas.png?raw=true'},
    {team: 'Utah State', url: baseUrl + 'Utah State.jpeg?raw=true'},
    {team: 'Utah', url: baseUrl + 'Utah.jpg?raw=true'},
    {team: 'Vermont', url: baseUrl + 'Vermont.jpg?raw=true'},
    {team: 'Victoria', url: baseUrl + 'Victoria.jpg?raw=true'},
    {team: 'Virginia', url: baseUrl + 'Virginia.jpg?raw=true'},
    {team: 'Virginia Tech', url: baseUrl + 'Virginia Tech.jpeg?raw=true'},
    {team: 'WashU', url: baseUrl + 'WashU.jpg?raw=true'},
    {team: 'Washington', url: baseUrl + 'Washington.jpg?raw=true'},
    {team: 'Wesleyan', url: baseUrl + 'Wesleyan.png?raw=true'},
    {team: 'Western Washington', url: baseUrl + 'Western Washington.jpg?raw=true'},
    {team: 'Whitman', url: baseUrl + 'Whitman.jpg?raw=true'},
    {team: 'Williams', url: baseUrl + 'Williams.jpg?raw=true'},
    {team: 'William & Mary', url: baseUrl + 'William & Mary.jpg?raw=true'},
    {team: 'Wisconsin', url: baseUrl + 'Wisconsin.jpg?raw=true'},
    {team: 'Wisconsin-Milwaukee', url: baseUrl + 'Wisconsin-Milwaukee.jpg?raw=true'},
    {team: 'Winona State', url: baseUrl + 'Winona State.jpg?raw=true'},
    {team: 'Yale', url: baseUrl + 'Yale.png?raw=true'}
];

// Color data for teams
export const colorData = [
    { team: "Alabama-Huntsville", color: "#1f51f3" },
    { team: "Arizona", color: "#D94B3E" },
    { team: "Auburn", color: "#f0812a" },
    { team: "BYU", color: "#FFD700" },
    { team: "Boston College", color: "#bc0032" },
    { team: "British Columbia", color: "#CDA900" },
    { team: "Brown", color: "#964B00" },
    { team: "Cal Poly SLO", color: "#68b0a7" },
    { team: "California", color: "#1D315E" },
    { team: "Carleton", color: "#c1172a" },
    { team: "Carnegie Mellon", color: "#64AE46" },
    { team: "Case Western Reserve", color: "#2AC1DF" },
    { team: "Central Florida", color: "#FEB934" },
    { team: "Chabot Community College", color: "#d6b002" },
    { team: "Cincinnati", color: "#E00122" },
    { team: "Colorado College", color: "#1A4B84" },
    { team: "Colorado State", color: "#1E4D2B" },
    { team: "Colorado", color: "#CFB87C" },
    { team: "Connecticut", color: "#000E2F" },
    { team: "Cornell", color: "#B31B1B" },
    { team: "Columbia", color: "#9BCDD2" },
    { team: "Dartmouth", color: "#00693E" },
    { team: "Delaware", color: "#FFD700" },
    { team: "Duke", color: "#003087" },
    { team: "East Carolina", color: "#592A8A" },
    { team: "Eastern Michigan", color: "#006633" },
    { team: "Florida State", color: "#782F40" },
    { team: "Florida", color: "#0021A5" },
    { team: "George Washington", color: "#A51E37" },
    { team: "Georgetown", color: "#041E42" },
    { team: "Georgia Tech", color: "#B3A369" },
    { team: "Georgia", color: "#BA0C2F" },
    { team: "Glassboro", color: "#1A4B84" },
    { team: "Harvard", color: "#A51E37" },
    { team: "Illinois", color: "#E84A27" },
    { team: "Indiana", color: "#990000" },
    { team: "Iowa State", color: "#C8102E" },
    { team: "Iowa", color: "#000000" },
    { team: "James Madison", color: "#46166B" },
    { team: "Kansas", color: "#0051BA" },
    { team: "LSU", color: "#461D7C" },
    { team: "Las Positas College", color: "#1A4B84" },
    { team: "Luther", color: "#1A4B84" },
    { team: "Maryland", color: "#E21836" },
    { team: "Massachusetts", color: "#881C1C" },
    { team: "McGill", color: "#ED1C24" },
    { team: "Michigan State", color: "#18453B" },
    { team: "Michigan", color: "#00274C" },
    { team: "Middlebury", color: "#1A4B84" },
    { team: "Minnesota-Duluth", color: "#7A0019" },
    { team: "Minnesota", color: "#7A0019" },
    { team: "Missouri", color: "#F1B82D" },
    { team: "MIT", color: "#8A8B8C" },
    { team: "NC State", color: "#CC0000" },
    { team: "UNC Wilmington", color: "#FFD700" },
    { team: "North Carolina", color: "#7BAFD4" },
    { team: "North Texas", color: "#00853E" },
    { team: "Northeastern", color: "#000000" },
    { team: "Northwestern", color: "#4E2A84" },
    { team: "Notre Dame", color: "#0C2340" },
    { team: "Oberlin", color: "#1A4B84" },
    { team: "Ohio State", color: "#BB0000" },
    { team: "Ohio", color: "#006F71" },
    { team: "Oregon State", color: "#D73F09" },
    { team: "Oregon", color: "#154733" },
    { team: "Ottawa", color: "#1A4B84" },
    { team: "Penn State", color: "#041E42" },
    { team: "Penn", color: "#011F5B" },
    { team: "Pittsburgh", color: "#003594" },
    { team: "Princeton", color: "#FF8F00" },
    { team: "Purdue", color: "#C28E0E" },
    { team: "Queen's", color: "#1A4B84" },
    { team: "Rice", color: "#00205B" },
    { team: "Rutgers", color: "#CC0033" },
    { team: "SUNY Albany", color: "#1A4B84" },
    { team: "SUNY Binghamton", color: "#1A4B84" },
    { team: "SUNY Purchase", color: "#1A4B84" },
    { team: "SW Missouri State", color: "#1A4B84" },
    { team: "Saint Louis", color: "#1A4B84" },
    { team: "Salisbury", color: "#1A4B84" },
    { team: "Southern California", color: "#990000" },
    { team: "Stanford", color: "#8C1515" },
    { team: "Swarthmore", color: "#1A4B84" },
    { team: "Syracuse", color: "#D44500" },
    { team: "Texas A&M", color: "#500000" },
    { team: "Texas State", color: "#4F2683" },
    { team: "Texas", color: "#BF5700" },
    { team: "Tufts", color: "#3E8EDE" },
    { team: "Tulane", color: "#006633" },
    { team: "UC Davis", color: "#1A4B84" },
    { team: "UCLA", color: "#2774AE" },
    { team: "UT Dallas", color: "#1A4B84" },
    { team: "Utah State", color: "#1A4B84" },
    { team: "Utah", color: "#CC0000" },
    { team: "Vermont", color: "#1A4B84" },
    { team: "Victoria", color: "#1A4B84" },
    { team: "Virginia", color: "#232D4B" },
    { team: "Virginia Tech", color: "#861F41" },
    { team: "WashU", color: "#1A4B84" },
    { team: "Washington", color: "#4B2E83" },
    { team: "Wesleyan", color: "#1A4B84" },
    { team: "Western Washington", color: "#1A4B84" },
    { team: "Whitman", color: "#1A4B84" },
    { team: "Williams", color: "#1A4B84" },
    { team: "William & Mary", color: "#1A4B84" },
    { team: "Wisconsin", color: "#C5050C" },
    { team: "Wisconsin-Milwaukee", color: "#1A4B84" },
    { team: "Winona State", color: "#1A4B84" },
    { team: "Yale", color: "#00356B" }
];

// Raw data from CSV
const rawData = {
    "College Men's": [
        { Team: "Stanford", Year: 1984, Rank: 1, T_Rank: 1, Division: "College Men's" },
        { Team: "Glassboro", Year: 1984, Rank: 2, T_Rank: 2, Division: "College Men's" },
        // ... more data ...
    ],
    "College Women's": [
        { Team: "Kansas", Year: 1987, Rank: 1, T_Rank: 1, Division: "College Women's" },
        { Team: "UC Davis", Year: 1987, Rank: 2, T_Rank: 2, Division: "College Women's" },
        // ... more data ...
    ]
};

// Helper functions for data processing
function getTeamStats(team, division) {
    const data = rawData[division].filter(d => d.Team === team);
    return {
        appearances: data.length,
        championships: data.filter(d => d.Rank === 1).length,
        top3: data.filter(d => d.Rank <= 3).length,
        top5: data.filter(d => d.Rank <= 5).length,
        top10: data.filter(d => d.Rank <= 10).length,
        years: data.map(d => d.Year).sort((a, b) => a - b),
        rankings: data.map(d => ({ year: d.Year, rank: d.Rank, tRank: d.T_Rank }))
    };
}

function getDivisionStats(division) {
    const data = rawData[division];
    const teams = [...new Set(data.map(d => d.Team))];
    
    return teams.map(team => {
        const stats = getTeamStats(team, division);
        return {
            team,
            ...stats
        };
    }).sort((a, b) => b.championships - a.championships || b.top3 - a.top3);
}

function getYearlyRankings(division, year) {
    return rawData[division]
        .filter(d => d.Year === year)
        .sort((a, b) => a.Rank - b.Rank);
}

// Helper functions
export function getOrdinalSuffix(num) {
    const n = parseInt(num);
    if (n > 3 && n < 21) return 'th';
    switch (n % 10) {
        case 1:  return "st";
        case 2:  return "nd";
        case 3:  return "rd";
        default: return "th";
    }
}

export function formatTRank(tRank) {
    const rankStr = (tRank == null) ? "" : String(tRank).trim();

    if (!rankStr) {
        return "No rank data";
    } else if (rankStr === "?") {
        return "Rank unknown";
    } else if (rankStr.startsWith("T")) {
        const numPart = rankStr.slice(1); 
        return `Tied for ${numPart}${getOrdinalSuffix(numPart)}`;
    } else if (/^\d+$/.test(rankStr)) {
        return `${rankStr}${getOrdinalSuffix(rankStr)}`;
    } else {
        return rankStr;
    }
}